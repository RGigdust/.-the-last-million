<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<style>
    /* تأثير الضغطة على الأسد */
    .lion-avatar:active { transform: scale(0.9) rotate(5deg); }
    
    /* تأثير الرقم اللي بيطير (+0.001) */
    .fly-text {
        position: absolute;
        color: var(--gold);
        font-weight: bold;
        pointer-events: none;
        animation: flyUp 0.8s ease-out forwards;
    }
    @keyframes flyUp {
        0% { opacity: 1; transform: translateY(0); }
        100% { opacity: 0; transform: translateY(-100px); }
    }

    /* شريط الطاقة (Energy) تحت الأسد */
    .energy-container {
        width: 80%;
        height: 12px;
        background: #222;
        border-radius: 10px;
        margin-top: 20px;
        border: 1px solid #333;
    }
    .energy-fill {
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, var(--gold), #fff);
        border-radius: 10px;
        transition: width 0.3s;
    }
</style>

<script>
    let energy = 1000;
    
    function mine(event) {
        if(energy <= 0) return; // لو مفيش طاقة مفيش صيد

        // 1. تحديث الرصيد والطاقة
        balance += 0.001;
        energy -= 5;
        document.getElementById('bal').innerText = balance.toFixed(3);
        document.querySelector('.energy-fill').style.width = (energy/10) + "%";

        // 2. تأثير الاهتزاز (مهم جداً للهوية)
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
        }

        // 3. خلق الرقم الطائر في مكان اللمس
        const fly = document.createElement('div');
        fly.className = 'fly-text';
        fly.innerText = '+0.001';
        fly.style.left = event.clientX + 'px';
        fly.style.top = event.clientY + 'px';
        document.body.appendChild(fly);
        setTimeout(() => fly.remove(), 800);
    }

    // شحن الطاقة تلقائياً
    setInterval(() => {
        if(energy < 1000) {
            energy += 1;
            document.querySelector('.energy-fill').style.width = (energy/10) + "%";
        }
    }, 1000);
</script>
