<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>The Last Million | العرين</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; background: #0b0e14; overflow: hidden; }
        #game-container { width: 100vw; height: 100vh; }
        .ui-overlay {
            position: fixed; top: 20px; left: 0; right: 0;
            display: flex; justify-content: center; z-index: 100;
            pointer-events: none;
        }
        .stat-card {
            background: rgba(0,0,0,0.8); border: 1px solid #d4af37;
            padding: 10px 25px; border-radius: 30px; color: #d4af37;
            font-family: 'Arial', sans-serif; font-weight: bold; font-size: 20px;
        }
    </style>
</head>
<body>

    <div class="ui-overlay">
        <div class="stat-card">السيادة: <span id="score">0.000</span> $LAST</div>
    </div>

    <div id="game-container"></div>

    <script>
        // إعدادات المحرك الاحترافي (زي ألعاب Moltbook)
        const config = {
            type: Phaser.AUTO,
            width: window.innerWidth,
            height: window.innerHeight,
            parent: 'game-container',
            transparent: true,
            physics: { default: 'arcade' },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);
        let player;
        let cursors;
        let score = 0;
        let scoreText;

        function preload() {
            // تحميل صورة الأسد من الرابط بتاعك
            this.load.image('lion', 'wingedlionpng.png');
            // تحميل خلفية الغابة
            this.load.image('forest', 'https://www.transparenttextures.com/patterns/dark-matter.png');
        }

        function create() {
            // إضافة خلفية قابلة للتكرار (الغابة)
            this.bg = this.add.tileSprite(0, 0, 4000, 4000, 'forest').setOrigin(0, 0);

            // إنشاء الأسد في المركز
            player = this.physics.add.sprite(window.innerWidth/2, window.innerHeight/2, 'lion');
            player.setScale(0.3); // تصغير الحجم ليناسب الغابة
            player.setCollideWorldBounds(true);

            // الكاميرا تلحق الأسد
            this.cameras.main.startFollow(player, true, 0.1, 0.1);

            // التحكم باللمس
            this.input.on('pointerdown', (pointer) => {
                // تحريك الأسد لمكان اللمس بنعومة
                this.physics.moveToObject(player, pointer, 300);
                
                // اهتزاز التليجرام
                if (window.Telegram?.WebApp) {
                    window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
                }
            });

            scoreText = document.getElementById('score');
        }

        function update() {
            // جعل الخلفية تتحرك مع الأسد لإعطاء إحساس بالعمق
            this.bg.x = player.x - 2000;
            this.bg.y = player.y - 2000;

            // تحديث الرصيد عند الحركة (محاكاة الصيد)
            if (player.body.speed > 0) {
                score += 0.0001;
                scoreText.innerText = score.toFixed(4);
            }

            // لف وجه الأسد حسب اتجاه الحركة
            if (player.body.velocity.x > 0) player.setFlipX(false);
            else if (player.body.velocity.x < 0) player.setFlipX(true);
        }
    </script>
</body>
</html>
