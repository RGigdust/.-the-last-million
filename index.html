<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; }
    </style>
</head>
<body>
    <script>
        const config = {
            type: Phaser.AUTO,
            width: window.innerWidth,
            height: window.innerHeight,
            physics: { default: 'arcade' },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);
        let player, target;

        // --- 1. Ù…Ø±Ø­Ù„Ø© Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„ØµÙˆØ± ---
        function preload() {
            const baseUrl = 'assets/';
            // Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ù„Ù…Ø³Ø§ÙØ§Øª %20 Ø¹Ø´Ø§Ù† Ø§Ù„ØµÙˆØ± ØªÙØªØ­ ØºØµØ¨ Ø¹Ù†Ù‡Ø§
            this.load.image('grass', baseUrl + 'images%20(38).jpeg');
            this.load.image('market', baseUrl + 'Images%20(1).png');
            this.load.image('clan', baseUrl + 'images%20(41).jpeg');
            this.load.image('shop', baseUrl + 'images%20(39).jpeg');
            this.load.image('lion', baseUrl + 'images%20(42).jpeg');
        }

        // --- 2. Ù…Ø±Ø­Ù„Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù„Ù… (Ø¯ÙŠ Ø§Ù„Ù„ÙŠ ÙƒÙ†Øª Ø¨ØªØ³Ø£Ù„ Ø¹Ù„ÙŠÙ‡Ø§) ---
        function create() {
            // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯ÙˆØ¯ Ù„Ù„Ø¹Ø§Ù„Ù… (3000 Ø¨ÙƒØ³Ù„)
            this.physics.world.setBounds(0, 0, 3000, 3000);

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø´Ø¨ ÙˆØªÙƒØ±Ø§Ø±Ù‡ Ù„Ù…Ù„Ø¡ Ø§Ù„Ø£Ø±Ø¶ÙŠØ©
            this.add.tileSprite(1500, 1500, 3000, 3000, 'grass');

            // ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ ÙÙŠ Ø£Ù…Ø§ÙƒÙ†Ù‡Ø§ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©
            this.add.image(1200, 1200, 'market').setScale(0.5); // Ø§Ù„Ø¨ÙˆØ±ØµØ©
            this.add.image(1800, 1200, 'clan').setScale(0.6);   // Ø§Ù„Ù‚Ù„Ø¹Ø©
            this.add.image(1500, 1800, 'shop').setScale(0.5);   // Ø§Ù„Ù…ØªØ¬Ø±

            // Ø¥Ø¶Ø§ÙØ© Ù†ØµÙˆØµ Ø¥Ø±Ø´Ø§Ø¯ÙŠØ© ÙÙˆÙ‚ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ
            this.add.text(1200, 1100, 'ğŸ›ï¸ Ø§Ù„Ø¨ÙˆØ±ØµØ©', { fontSize: '20px', fill: '#ffd700', backgroundColor: '#000' }).setOrigin(0.5);
            this.add.text(1800, 1100, 'ğŸ° Ø§Ù„Ø¹Ø´ÙŠØ±Ø©', { fontSize: '20px', fill: '#ffd700', backgroundColor: '#000' }).setOrigin(0.5);
            this.add.text(1500, 1700, 'ğŸ’° Ø§Ù„Ù…ØªØ¬Ø±', { fontSize: '20px', fill: '#ffd700', backgroundColor: '#000' }).setOrigin(0.5);

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø³Ø¯ (Ø§Ù„Ù„Ø§Ø¹Ø¨)
            player = this.physics.add.sprite(1500, 1500, 'lion').setScale(0.3);
            player.setCollideWorldBounds(true);

            // Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø³Ø¯ Ø¨Ù†Ø¹ÙˆÙ…Ø©
            this.cameras.main.startFollow(player, true, 0.05, 0.05);

            // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„Ù…Ø³
            this.input.on('pointerdown', (pointer) => {
                target = pointer.positionToCamera(this.cameras.main);
                this.physics.moveToObject(player, target, 250);
            });
        }

        // --- 3. Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªÙ…Ø± ---
        function update() {
            if (target && player.body) {
                let dist = Phaser.Math.Distance.Between(player.x, player.y, target.x, target.y);
                // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø£Ø³Ø¯ Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„Ù‡ Ù„Ù„Ù‡Ø¯Ù
                if (dist < 10) {
                    player.body.reset(player.x, player.y);
                    target = null;
                }
                // Ù„Ù ÙˆØ¬Ù‡ Ø§Ù„Ø£Ø³Ø¯ Ù„Ù„ÙŠÙ…ÙŠÙ† Ø£Ùˆ Ø§Ù„ÙŠØ³Ø§Ø± Ø­Ø³Ø¨ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ©
                player.setFlipX(player.body.velocity.x < 0);
            }
        }
    </script>
</body>
</html>
