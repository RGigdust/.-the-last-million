<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Last Million | Royal Connection</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; background: #020502; overflow: hidden; touch-action: none; }
        
        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ© - ØªÙ… Ø¥ØµÙ„Ø§Ø­Ù‡Ø§ Ù„Ù„Ø¨ÙˆØ±ØµØ© ÙˆØ§Ù„Ù…ØªØ¬Ø± */
        .royal-ui {
            position: fixed;
            top: 15px;
            width: 100%;
            display: flex;
            justify-content: space-around;
            z-index: 9999; /* Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ù‡Ø§ ÙÙˆÙ‚ ÙƒÙ„ Ø´ÙŠØ¡ */
            pointer-events: none;
        }

        .btn-icon {
            background: linear-gradient(135deg, #ffd700, #b8860b);
            border: 2px solid #fff;
            border-radius: 12px;
            padding: 8px 15px;
            color: #000;
            font-weight: bold;
            font-size: 14px;
            pointer-events: auto; /* Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¶ØºØ· */
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        .btn-icon:active { transform: scale(0.9); }
    </style>
</head>
<body>

    <div class="royal-ui">
        <div class="btn-icon" onclick="openMarket()">ğŸ“ˆ Ø§Ù„Ø¨ÙˆØ±ØµØ©</div>
        <div class="btn-icon" onclick="openShop()">ğŸ’ Ø§Ù„Ù…ØªØ¬Ø±</div>
        <div class="btn-icon" onclick="openClan()">ğŸ° Ø§Ù„Ø¹Ø´ÙŠØ±Ø©</div>
    </div>

    <div id="game-container"></div>

    <script>
        // ØªÙØ¹ÙŠÙ„ ØªÙ„ÙŠØ¬Ø±Ø§Ù…
        const tg = window.Telegram.WebApp;
        tg.expand(); // ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨ÙƒØ§Ù…Ù„ Ø§Ù„Ø´Ø§Ø´Ø©
        
        const config = {
            type: Phaser.AUTO,
            width: window.innerWidth,
            height: window.innerHeight,
            parent: 'game-container',
            physics: { default: 'arcade' },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);
        let player, target;

        function preload() {
            this.load.image('lion', 'https://cdn-icons-png.flaticon.com/512/616/616412.png');
            this.load.image('tree', 'https://cdn-icons-png.flaticon.com/512/490/490391.png');
        }

        function create() {
            this.physics.world.setBounds(0, 0, 4000, 4000);
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø­ÙŠØ±Ø©
            this.add.circle(2000, 2000, 400, 0x00ffff, 0.2);
            
            // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø´Ø¬Ø§Ø±
            for(let i=0; i<150; i++) {
                let x = Phaser.Math.Between(0, 4000);
                let y = Phaser.Math.Between(0, 4000);
                if(Phaser.Math.Distance.Between(x,y, 2000, 2000) > 400) {
                    this.add.image(x, y, 'tree').setScale(0.5).setOrigin(0.5, 1);
                }
            }

            // Ø³Ø­Ø¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† ØªÙ„ÙŠØ¬Ø±Ø§Ù…!
            let userName = tg.initDataUnsafe?.user?.first_name || "Ø§Ù„Ø£Ø³Ø¯ Ø§Ù„Ù…Ù„Ùƒ";
            
            player = this.physics.add.sprite(2000, 2200, 'lion').setScale(0.25);
            this.add.text(2000, 2150, userName, { fontSize: '18px', fill: '#ffd700', backgroundColor: '#000' }).setOrigin(0.5);

            this.cameras.main.startFollow(player);
            
            this.input.on('pointerdown', (pointer) => {
                target = pointer.positionToCamera(this.cameras.main);
                this.physics.moveToObject(player, target, 250);
            });
        }

        function update() {
            if (target) {
                let dist = Phaser.Math.Distance.Between(player.x, player.y, target.x, target.y);
                if (dist < 10) { player.body.reset(target.x, target.y); target = null; }
                player.setFlipX(player.body.velocity.x < 0);
            }
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        function openMarket() { tg.showAlert("Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø§Ù„Ø¨ÙˆØ±ØµØ© Ø§Ù„Ø­ÙŠØ©.. Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙÙŠ ØµØ¹ÙˆØ¯! ğŸš€"); }
        function openShop() { tg.showAlert("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ! ğŸ’"); }
        function openClan() { tg.showAlert("Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¬ÙŠØ´ Ø§Ù„Ø¹Ø±ÙŠÙ†.. âš”ï¸"); }
    </script>
</body>
</html>
